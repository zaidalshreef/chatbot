<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chatbot Interface</title>
    <!-- Include Tailwind CSS from CDN -->
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.1.4/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <script>
      // Function to send a message to the chatbot and get a response
      async function sendMessageToChatbot(message) {
        const response = await fetch(
          "https://zaidalsharif.pythonanywhere.com/chat",
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ message: message }),
          }
        );
        return await response.json();
      }

      // Function to handle the form submission
      async function handleFormSubmit(event) {
        event.preventDefault();
        if (event.target[0].value == "") return;
        else {
          const inputField = document.getElementById("chatbotInput");
          const message = inputField.value;
          const response = await sendMessageToChatbot(message);
          displayMessage(message, "user");
          displayMessage(response.response, "bot");
          console.log(response.response);
          inputField.value = ""; // Clear the input field
        }
      }

      // Function to display a message in the chat interface
      function displayMessage(message, sender) {
        const messagesContainer = document.getElementById("messagesContainer");
        const messageDiv = document.createElement("div");
        messageDiv.classList.add(
          "flex",
          sender === "user" ? "justify-end" : "justify-start"
        );
        const messageBubble = document.createElement("div");
        messageBubble.classList.add(
          "rounded-full",
          "py-2",
          "px-4",
          "max-w-xs",
          "lg:max-w-md",
          sender === "user" ? "bg-purple-500" : "bg-gray-700"
        );
        messageBubble.textContent = message;
        messageDiv.appendChild(messageBubble);
        messagesContainer.appendChild(messageDiv);
      }

      document.addEventListener("DOMContentLoaded", () => {
        const form = document.getElementById("chatbotForm");
        form.addEventListener("submit", handleFormSubmit);
      });
    </script>
  </head>
  <body class="bg-gray-800 h-screen flex items-center justify-center">
    <!-- Chatbot Container -->
    <div
      class="bg-gray-900 flex flex-col justify-between h-full text-white rounded-lg shadow-lg p-6 w-1/2"
    >
      <div>
        <!-- Chatbot Header -->
        <div class="border-b flex gap-3 items-center border-gray-700 pb-4 mb-4">
          <div>
            <img
              src="/images/image.png"
              alt="Chatbot Icon"
              class="inline-block w-10 h-10 rounded-full"
            />
          </div>
          <div>
            <h1 class="text-xl font-bold text-purple-400">THE CHATBOT</h1>
            <p class="text-gray-400 text-sm">Ask me anything!</p>
          </div>
        </div>

        <!-- Chatbot Messages -->
        <div id="messagesContainer" class="space-y-4 overflow-auto">
          <!-- Messages will be displayed here -->
        </div>
      </div>
      <!-- Chatbot Input -->
      <div class="pt-4 mb-4">
        <form id="chatbotForm" class="flex items-center gap-2">
          <input
            id="chatbotInput"
            type="text"
            placeholder="Type your message..."
            class="w-full p-3 rounded-full bg-gray-800 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500"
          />
          <button
            class="rounded-full w-9 h-9 flex items-center justify-center p-2 bg-purple-500"
            type="submit"
          >
            <img class="w-6" src="images/send.png" />
          </button>
        </form>
      </div>
    </div>
  </body>
</html>
